/*

 @Name：jetpl v1.4 JS模板引擎
 @Author：陈国军
 @Date：2016-12-16
 @QQ群：516754269
 @官网：http://www.jayui.com/jetpl/  或　 https://github.com/singod/jetpl　
        
*/
!function(a,b){var d,c=b(a);"function"==typeof define&&define.amd?define("jetpl",function(){return c}):"object"==typeof exports?module.exports=c:(d=a.jetpl,c.noConflict=function(){return a.jetpl===c&&(a.jetpl=d),c},a.jetpl=c)}(this,function(){var e,b={},c={error:function(a,b){var c="jetpl ";return"object"==typeof console&&console.error(c+a+"\n"+(b||"")),c+a},keys:function(a){var b=[];for(b[b.length]in a);return b}},d=function(a){var c=this;a=a||"",/^\#/.test(a)&&(a=document.getElementById(a.substring(1)).innerHTML),c.tpl=a,c.tplinit(),b[a]=c};return d.prototype.tplCompiler=function(a){var b=0,c=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"").replace(/(^|%}|}})([\s\S]*?)({{|{%|$)/g,function(a,b,c,d){return b+'outStr+= "'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r?\n/g,"\\n")+'";\n'+d}).replace(/({%=)([\s\S]*?)(%})/g,"outStr+= ($2);\n").replace(/({%)(?!=)([\s\S]*?)(%})/g,"\n$2\n").replace(/{{each\s*([\w."'\][]+)\s*(\w+)\s*(\w+)?}}/g,function(a,c,d,e){var f="tps"+b++,g="for(var $p=0; $p<$1.length; $p++){";return g+=d?"\nvar $2 = $1[$p];\n":"\nvar $item = $1[$p];\n",g+=e?"\nvar $3 = $p;\n":"",g.replace(/\$1/g,c).replace(/\$2/g,d).replace(/\$3/g,e).replace(/\$p/g,f)}).replace(/{{\/each}}/g,"};\n").replace(/{{if\s+(.*?)}}/g,"if($1){").replace(/{{else ?if (.*?)}}/g,"}else if($1){").replace(/{{else}}/g,"}else{").replace(/{{\/if}}/g,"}").replace(/{{=?([\s\S]*?)}}/g,"outStr+=$1;\n");return c='var outStr="";\n'+c+"return outStr;"},d.prototype.dataToVars=function(a){for(var e,b=c.keys(a||{}).sort(),d="";b.length;)e=b.shift(),d+="var "+e+'= jedata["'+e+'"];';return d},d.prototype.tplinit=function(){var a=this,d=a.tpl,e=function(c,d){var e,f,g;return b[c]=b[c]||{},e=a.dataToVars(d),b[c].vars==e?b[c].refuns:(f=b[c].code||a.tplCompiler(c),g=new Function("jedata",e+f),b[c].vars=e,b[c].code=f,b[c].refuns=g,g)},f=function(a,b){var c=e(a,b);return arguments.length>1?c(b):function(b){var c=e(a,b);return c(b)}},g=a.render=function(a,b){var e,g;if(!a)return c.error("no data");try{if(e=f(d,a),!b)return g=f(d),g(a);b(e)}catch(h){return b("jetpl "+h),c.error(h,d)}};return g},e=function(a){return"string"!=typeof a?c.error("Template not found"):new d(a)},e.decode=function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")},e.escape=function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},e.toNumber=function(a){return a.toString()},e.date=function(a,b){var f,c=b||"YYYY-MM-DD",d=new Date(1e3*a),e={"M+":d.getMonth()+1,"D+":d.getDate(),"h+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),ms:d.getMilliseconds()};/(Y+)/.test(c)&&(c=c.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length)));for(f in e)new RegExp("("+f+")").test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?e[f]:("00"+e[f]).substr((""+e[f]).length)));return c},e.include=function(a,b){var c=document.getElementById(a.replace(/\#/g,"")),d=/input|textarea/i.test(c.nodeName)?c.value:c.innerHTML;return e(d).render(b)},e.version="1.4",e});